\newcommand{\fetchmock}[1] {img/mockup/#1.jpg}
\def \imgwidth {.6\linewidth}
\def \pagwidth {.5\linewidth}
\newcommand{\uclist}[1] {
  \setlist{nolistsep}
  \begin{enumerate}[noitemsep]
    #1
  \end{enumerate}
}
\newcommand{\usecase}[9] {
  \begin{table}[h!]
  \centering
    \begin{tabularx}{\linewidth}{|c|X|}
      \hline
      \textbf{ID}               & \texttt{UC.#1} \\ \hline
      \textbf{Name}             & #2 \\ \hline
      \textbf{Actors}           & #3 \\ \hline
      \textbf{Entry Condition}  & #4 \\ \hline
      \textbf{Flow of Events}   & #5 \\ \hline
      \textbf{Exit Condition}   & #6 \\ \hline
      \textbf{Exceptions}       & #7 \\ \hline
      \textbf{Special Requirements}  & #8\\ \hline
    \end{tabularx}
    \caption*{#9}
    \label{tab:uc#1}
  \end{table}
}

\section{Specific requirements}
\label{sec:specreq}

  \subsection{External interface requirements}

    \subsubsection{User interfaces}
    \label{sec:userinterfaces}

      We will present the mockups of \texttt{Data4Help} app with \texttt{AutomatedSOS} options for users. Filters and forms fields are presented only for illustrative purposes: they may change in future releases or in the final product. These mockups are intended only to give an idea of what the graphical interface of our system will be like.

      \begin{figure}[h!]
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{homepage}}
          \caption{Login screen}
          \label{fig:homepage}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_registration}}
          \caption{User registration form}
          \label{fig:u_registration}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
        \end{minipage}
      \end{figure}

      \clearpage

      \begin{figure}[h!]
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_data}}
          \caption{User default screen}
          \label{fig:u_data}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_sidebar}}
          \caption{User sidebar}
          \label{fig:u_sidebar}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_filters}}
          \caption{Graphical interface filters}
          \label{fig:u_filters}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_request}}
          \caption{User request}
          \label{fig:u_request}
        \end{minipage}
      \end{figure}

      \clearpage

      \begin{figure}[h!]
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_options}}
          \caption{User options}
          \label{fig:u_options}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_permissions}}
          \caption{User permissions}
          \label{fig:u_permissions}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_anonym}}
          \caption{Anonymous sharing types}
          \label{fig:u_anonym}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_registration}}
          \caption{Third party registration}
          \label{fig:tp_registration}
        \end{minipage}
      \end{figure}

      \clearpage

      \begin{figure}[h!]
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_data}}
          \caption{Third party default screen}
          \label{fig:tp_data}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_sidebar}}
          \caption{Third party sidebar}
          \label{fig:tp_sidebar}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_requests}}
          \caption{Third party requests}
          \label{fig:tp_requests}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_options}}
          \caption{Third party options}
          \label{fig:tp_options}
        \end{minipage}
      \end{figure}

      \begin{figure}[ht!]
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_sreq}}
          \caption{Single user request form}
          \label{fig:tp_sreq}
          %\vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_areq}}
          \caption{Anonymous request form}
          \label{fig:tp_areq}
          %\vspace{4ex}
        \end{minipage}
      \end{figure}

    %\subsubsection{Hardware interfaces} % FABIO ho tolto hardware e communication interfaces, tanto una non c'è e l'altra è già spiegata in Software interfaces

      %\texttt{Data4Help} is a software-based system and its functionalities are intended to be exploited in a software-based environment, hence no hardware interface is provided.

    \subsubsection{Software interfaces}

      \texttt{Data4Help} will not provide an automated software interface for user functionalities. However, for third parties that need automated access to our services, we will provide an API that communicates with messages encoded in JSON syntax. The API interface will be found in the software documentation and will be able to
      \begin{itemize}
        \item accept third party requests for access to new data
        \item accept third party requests for data they already have access to
        \item send data sets that third parties have requested, if they are allowed to have access to them
      \end{itemize}
      This API is used also by the app installed on third parties devices.

    %\subsubsection{Communication interfaces}

  \subsection{Functional requirements}

    \begin{description}
      \item[Account handling]
      \item[\texttt{R.A1}] The system shall allow users registration
      \item[\texttt{R.A2}] The system shall allow third party registration
      \item[\texttt{R.A3}] The system shall distinguish between user and third party accounts
      \item[\texttt{R.A4}] The system shall guardantee account uniqueness by not allowing two account to have the same email
      \item[\texttt{R.A6}] The system shall allow users and third parties to access their account (\textit{login}) only if they provide correct email and password
      \item[\texttt{R.A7}] The system shall allow users and third parties to exploit \texttt{Data4Help} and \texttt{AutomatedSOS} functionalities only if they are \textit{logged in} their account

      \item[Data encoding]
      \item[\texttt{R.D1}] The system shall encode data received through wearables'sensors and store it internally\footnote{for example the system can store data into an internal database or can save it using a cloud service; the important aspect is that data must be retrivable in the future}
      \item[\texttt{R.D2}] The system shall be able to retrive data previously stored on request
      \item[\texttt{R.D3}] The system shall not erase data once it is stored internally
      \item[\texttt{R.D4}] Once the system just stored data, it shall allow access to that data only to the user account that was \textit{logged in} while the data was collected
      \item[\texttt{R.D5}] The system shall be able to share the stored data to more than one account
      \item[\texttt{R.D6}] The system shall be able to compose groups of data entries (\textit{aggregate data}) and anonymize them (every data entry in the group has no information about the providing user, such as fiscal code or email)

      \item[Interfaces]
      \item[\texttt{R.I1}] The system shall provide a registration form for users and third parties
      %TODO in case there are no data? Interface will not render anything: the requirement says that the interface shall be ABLE to render data in enery case, so I think it's fine
      \item[\texttt{R.I2}] The system shall provide to users and third parties an interface able to render data graphically, allowing filters like time interval or data type
      \item[\texttt{R.I3}] The system shall provide a request form to the third parties

      \item[Data sharing requests]
      \item[\texttt{R.R1}] The system shall allow third parties to ask for data sharing of a single user by filling the request form
      \item[\texttt{R.R2}] The system shall ask the user to accept or decline every single-user request of data sharing by third parties that has him/her as target user
      \item[\texttt{R.R3}] The system shall provide access to the target user data to the third party only if the user accepted the request of the third party, otherwise the system shall notify to the third party that the user declined the request
      \item[\texttt{R.R4}] The system shall allow third parties to ask for data sharing of \textit{aggregate data} by filling the request form
      \item[\texttt{R.R5}] The system shall be able to check if a request for \textit{aggregate data} by a third party can be properly anonymized (there shall be at least 1000 user data entries that fit the parameters of the request)
      \item[\texttt{R.R6}] The system shall provide access to the \textit{aggregate data} to the third party only if the the request can be properly anonymized, otherwise the system shall notify the third party that its request cannot be properly anonymized
      \item[\texttt{R.R7}] The system shall provide access to a third party to newly produced data if it fits the third party request
      % TODO add refernce to the request structure, because this requirement is a bit ambiguous

      \item[SOS calls]
      \item[\texttt{R.S1}] The system shall provide to the user an option to apply to \texttt{AutomatedSOS}
      \item[\texttt{R.S2}] If user applied to \texttt{AutomatedSOS}, the system shall monitor his/her parameters in real time by checking whether they are above or below the thresholds
      % TODO add reference
      \item[\texttt{R.S3}] If user applied to \texttt{AutomatedSOS} and his/her health parameters are critical (above or below thresholds), the system shall send an emergency call to the SOS system
      \item[\texttt{R.S4}] When the system sends an emergency call, it shall provide to the SOS system API user's GPS location and user's health status through his/her critical parameters encoding

    \end{description}

  \subsection{Scenarios}

    \subsubsection{Stroke detection}

      Luke is a 65 years old man that after 40 years of work at the post office finally got retired. Because of the sedentary nature of his work he is worried that he may suffer a stroke. In order to monitor his health parameters, he buys a smartwatch that can monitor his heartbeat and downloads the \texttt{Data4Help} app. The system allows him to create an account after filling all the required information (Table~\ref{tab:login}). The system explicitly asks Luke if he wants to join the \texttt{AutomatedSOS} service and Luke accepts. The system starts checking in real time Luke's health parameters that are collected through his smartwatch.

      After some days Luke's health parameters exceede thresholds because of a stroke: the system recognizes immediatly the critical situation and forwards in less than 5 seconds an emergency notification to the SOS system, providing Luke's GPS location and health status feedback.

    \subsubsection{Anonymous request}

      The franchise BodySlim is opening a new gym in Milan near Parco Sempione. Its most succesful and distinctive characteristic is the timetable: open 365 days per year, 8 hours per day. In order to maximize the revenue the management would like to know in which time of the day potential customers do physical activity. A reliable sample can be obtained from Data4Help, therefore BodySlim creates a third party account by giving the required information (Table~\ref{tab:login}). The franchise fills the third party request form for an anonymous request (Table~\ref{tab:tprequest}): at least 2000 individuals of age between 20 and 60 in Parco Sempione area. As BodySlim confirms the request, the system fetches in its database users that fit BodySlim's request, composes a data set containing their data entries, anonymizes the data set and shares it with BodySlim's account. The franchise can now filter data by hour of day and identify when is Parco Sempione most frequented: these are, from its perspective, the most profitable hours in which the gym should stay opened.

      %Otherwise if the research is not successfully, Data4Help denied the request of BodySlim which has to find another way to obtain a reliable sample.
      %NO ALTERNATIVES:THIS IS AN EXAMPLE/AN APPLICATION

    \subsubsection{Single user request}

      Rose has just discovered that she's expecting a daughter. Dr. Harold, her gynecologist, needs to keep monitoring her blood ossygen, electrocardiogram and heartbeat, in order to understand if the pregnancy is proceeding well. He decides to exploit \texttt{Data4Help} third party functionalities, as he does with his other patients. He asks Rose to create an account of \texttt{Data4Help}, then logs into his account by providing email and password. He navigates to the request form and inserts Rose's fiscal code and the data types he wants to have access to for the next nine months. After the request has been confirmed, Rose receives the notification of Dr. Harold's request to her account and accepts it.

      Nine months later, Marie is born. She is beautiful and healthy, thanks to the pregnancy monitoring by Dr. Harold, exploited through the \texttt{Data4Help} service.

      % According to the single-user request(see Table 2)  policy Data4Help asks to Rose the consensus for sharing these data. Rose,which really care about her daughter's health, immediately gave the authorization to the app that can make them available to her gynecologist.
      %her motherRose which is worried about her privacy, wouldn't like to share his personal data anymore so decides to unsubscribe to Data4Help. The system after having received the request, delete her Dataset and her account. From now on neither the gynecologist nor Data4Help will be able to access to Rose's data.

    \subsubsection{Subsribing to new data}

      Jack is a policeman that has decided to spend his holidays in a spa called BeautySPA. It will allow him to lose 15kg thanks to fitness activity and healthy diet. In order to understand if this treatment is efficient over time BeautySPA decides that Jack's weight and body temperature should be monitored. The policeman and BeautySPA create respectively a user and a third party account of \texttt{Data4Help} and the system, after checking that all the required information (Table~\ref{tab:login}) are properly filled, allows them to exploit its functionalities.

      BeautySPA immediately applies for the Jack's health parameters through a third party request. The app asks to Jack the authorization whether to provide his data to the spa or not. He accepts and \texttt{Data4Help} shares his data to BeautySPA.

      Unfortunately, after just one month, the policeman had a weight increase of 6kg. In order to better understand which may be the cause the spa applies for more parameters (blood oxygen and heartbeat) through another third party request. Jack receives the notification, but, unhappy about his previous treatment, declines the request. BeautySPA won't have access to Jack's blood oxygen and heartbeat parameters.

    \subsubsection{Graphical interface}

      Paul is studying Telecommunication Engineering at Politecnico di Milano. He would like to partecipate at PolimiRun (held in May), therefore he has trained twice a week since January. In order to monitor his progress, he downloaded the \texttt{Data4Help} app and created a user account. He allowed anonymous sharing of heartbeat and blood ossygen to third parties. The system periodically collected Paul's parameters and saved the correspondent data entries in its database.

      At the end of April Paul wants to check if the PoliRun is beyond his physical capacities. After the login phase, he filters his data through the graphical interface, by limiting the rendering to blood ossygen and heartbeat weekly entries from January to April. The system retrieves the required data and renders it. Paul sees the impressive physical improvement during the four months (blood oxygen increase, heartbeat per minute reduced) and states that the PolimiRun is absolutely realistic for him.

    \subsubsection{Multiple single user requests}

      FastAndEasy, a car sharing company, has a business model based on how much time its clients rent one car in a week. After five years of activity, the society has to decide whether to change this model with a kilometers-based one or keeping the old time-based one. In order to take the right decision, FastAndEasy needs to know the GPS location of all of its clients while they are driving cars for the next three months. Because of this time-limited solution it would be a waste of money to implement a new system from scratch for picking up these data. FastAndEasy decides to rely on \texttt{Data4Help} and creates a third party account. It asks through multiple third party request forms the GPS location of its clients, identified by fiscal code. Many of them accept the request, forwarded by \texttt{Data4Help}, after FastAndEasy confirmation.

      After three months, FastAndEasy brings the collected data to the Board of Directors. They can now compute the possible earnings of the new model and compare them with the old ones, in order to take a decision about the business model.

  \clearpage
  \subsection{Use cases}

    \usecase % user registration
      {1}
      {Register of User \texttt{Data4Help}}
      {User}
      {\texttt{Data4Help} app downloaded on user's smartphone}
      {\uclist{
        \item User clicks on \texttt{Register} button of the login screen (Figure~\ref{fig:homepage})
        \item User fills the registration form (Figure~\ref{fig:u_registration})
        \item User checks which data types he/she intends to anonymously share to third parties (Figure~\ref{fig:u_anonym})
        \item User checks whether he/she wants to apply to \texttt{AutomatedSOS} system
        \item User clicks \texttt{Register} button of the registration form
        \item The system creates a \texttt{Data4Help} account for the user
      }}
      {User's account has been successfully created and added to the system database}
      {\uclist{
        \item[5.$^*$] The field \texttt{email} is invalid or corresponds to an email that already exists in the system database; the field \texttt{fiscal code} is not valid; the \texttt{password} fields don't correspond

        The system notifies the issue to the user and the \textbf{Flow of Events} returns to 2, erasing invalid fields
      }}
      {}
      {$^*$ The item number in the \textbf{Exceptions} section corresponds to the phase in the \textbf{Flow of Events} in which the exception can be thrown}


    \usecase % tp registration
      {2}
      {Register of Third party to \texttt{Data4Help}}
      {Third party}
      {\texttt{Data4Help} software downloaded on third party's device}
      {\uclist{
        \item Third party clicks on \texttt{Register} button of the login screen (Figure~\ref{fig:homepage})
        \item Third party fills the registration form (Figure~\ref{fig:tp_registration})
        \item Third party clicks \texttt{Register} button of the registration form
        \item The system creates a \texttt{Data4Help} account for the third party
      }}
      {Third party's account has been successfully created and added to the system database}
      {\uclist{
        \item[3.] The field \texttt{email} is invalid or corresponds to an email that already exists in the system database; the \texttt{password} fields don't correspond

        The system notifies the issue to the third party and the \textbf{Flow of Events} returns to 2, erasing invalid fields
      }}
      {}
      {}


    \usecase % user login
      {3}
      {Log In of User in \texttt{Data4Help}$^*$}
      {User}
      {User has already created an account}
      {\uclist{
        \item User fills \texttt{email} and \texttt{password} fields of the login screen (Figure~\ref{fig:homepage})
        \item User clicks on \texttt{Login} button
      }}
      {User is successfully logged in the system and can exploit all the system services; the graphical interfaces moves to the default screen (Figure~\ref{fig:u_data})}
      {\uclist{
        \item[2.] The system discovers that field \texttt{email} is invalid or doesn't corresponds to an email that already exists in the system database; the system discovers that field  \texttt{password} doesn't correspond to the one paired with the email

        The system notifies the issue to the user and the \textbf{Flow of Events} returns to 1
      }}
      {}
      {$^*$ The use case \textit{Log in of Third party} in \texttt{Data4Help} is equivalent to this one, by changing \textit{user} with \textit{third party}}

    \usecase % call ambulance
      {4}
      {Call an ambulance}
      {SOS System, User}
      {User subscribed to \texttt{AutomatedSOS}, his/her health parameters exceede thresholds}
      {\uclist{
        \item The system retrives the user's data entry which parameters exceeded thresholds from the database
        \item The system composes a SOS message with the GPS location of the user and the critical parameters contained in the data entry
        \item The system forwards to the SOS system the SOS message % in less than 5 seconds
        \item The SOS system accepts the message
      }}
      {The SOS system succesfully received the SOS message; the ambulance dispatchment is beyond the system's scope}
      {\uclist{
        \item[4.] The SOS system is not reachable; \textbf{Flow of Events} rollbacked to 3
      }}
      {The system shall make the call to SOS system within 5 seconds from the moment of health danger detection}
      {}


    \usecase % single user request
      {5}
      {Accept a single user request}
      {Third party, User}
      {Third party and user have already created respectively a third party and a user account and they are already logged in the system}
      {\uclist{
        \item Third party opens the sidebar (Figure~\ref{fig:tp_sidebar})
        \item Third party clicks on \texttt{My requests} button
        \item Third party fills the form for a single user request (Figure~\ref{fig:tp_sreq}), adding user's fiscal code
        \item Third party clicks the \texttt{Confirm} button
        \item The system receives the request by the third party and forwards a notification to the user
        \item User clicks on the notification and opens the request information (Figure~\ref{fig:u_request})
        \item User clicks the \texttt{Accept} button
        \item The system receives user's response and shares requested data to the third party
      }}
      {Third party can exploit user's requested data}
      {\uclist{
        \item[4.] The system doesn't find any user whose fiscal code correspond to the one inserted by the third party; \textbf{Flow of Events} rollbacked to 3
        \item[7.] User declines the request; the system notifies to the third party that is not allowed to exploit user's data
      }}
      {}
      {}


   \usecase % anonymous group request
      {6}
      {Accept an anonymous group request}
      {Third Party}
      {Third party has already created an account and it's already logged in the system}
      {\uclist{
        \item Third party opens the sidebar (Figure~\ref{fig:tp_sidebar})
        \item Third party clicks on \texttt{My requests} button
        \item Third party fills the form for an anonymous group request (Figure~\ref{fig:tp_areq}); it selects the data set size (at least 1000)
        \item Third party clicks the \texttt{Confirm} button
        \item The system fetches from the databse a quantity of data entries equal to the data set size selected by the third party; all of the data entries match the request filters
        \item The system anonymizes the data entries and composes an anonymous data set
        \item The system shares the data set to the third party
      }}
      {Third party can exploit requested data}
      {\uclist{
        \item[5.] The system doesn't find enough data entries that match the request filters; the system notifies to the third party that its request cannot be fulfilled
      }}
      {}
      {}

    \usecase % graphical filters
      {7}
      {Show and filter acquired data}
      {User}
      {User has already created an account and he/she is already logged in the system}
      {\uclist{
        \item User opens the sidebar (Figure~\ref{fig:u_sidebar})
        \item User clicks on \texttt{My data} button
        \item User clicks on \texttt{Filter type} button and ticks which filter types he/she want to visualize (Figure~\ref{fig:u_filters})
        \item User selects the time period of the data visualization
        \item The system processes user's request and renders the new data chart
      }}
      {User can see the data he/she requested according to the specified filter}
      {\uclist{
        \item[5.] User inserted a non valid time period; the system notifies the user of the error; \textbf{Flow of Events} rollbacked to 4
      }}
      {}
      {}


    \begin{table}[h!]
      \centering
      \begin{tabularx}{.8\linewidth}{|X|X|X|X|}
        \hline
        \textbf{Raw ID} & \textbf{Goal ID} & \textbf{Req ID} & \textbf{Use Case ID} \\ \hline
        \texttt{r1} & \texttt{G.U1} & \texttt{R.A1}, \texttt{R.A3}, \texttt{R.A4}, \texttt{R.I1} & \texttt{UC.1} \\
        \hline
        \texttt{r2} & \texttt{G.T1}, \texttt{G.T2}, \texttt{G.T3} & \texttt{R.A2}, \texttt{R.A3}, \texttt{R.A4}, \texttt{R.I1} & \texttt{UC.2} \\
        \hline
        \texttt{r3} & \texttt{G.U1} & \texttt{R.A3}, \texttt{R.A6}, \texttt{R.A7} & \texttt{UC.3} \\
        \hline
        \texttt{r4} & \texttt{G.U2} & \texttt{R.S1},  \texttt{R.S2}, \texttt{R.S3}, \texttt{R.S4} & \texttt{UC.5} \\
        \hline
        \texttt{r5} & \texttt{G.T1} & \texttt{R.A3}, \texttt{R.I3}, \texttt{R.R1}, \texttt{R.R2}, \texttt{R.R3}& \texttt{UC.4}  \\
        \hline
        \texttt{r6} & \texttt{G.T2} & \texttt{R.A3},  \texttt{R.D2}, \texttt{R.D5}, \texttt{R.D6}, \texttt{R.I3}, \texttt{R.R4}, \texttt{R.R5}, \texttt{R.R6} & \texttt{UC.6}   \\
        \hline
        \texttt{r7} & \texttt{G.U1} & \texttt{R.A3}, \texttt{R.A7},  \texttt{R.I2},  \texttt{R.D2} & \texttt{UC.7}   \\
        \hline
      \end{tabularx}
      \caption{Traceability matrix}
      \label{tab:tracmatrix}
    \end{table}

  \clearpage
  \subsection{Performance requirements}
  \label{sec:performance}

    \begin{description}
      \item[\texttt{R.P1}] The system shall detect in \textbf{negligible time} (less than 0.1 seconds) if a data entry has values that exceed thresholds\footnote{this situation directly corresponds to user's health in danger, according to the domain assumptions}
      \item[\texttt{R.P2}] The system, once an emergency is detected (as in \texttt{R.P1}), shall forward an emergency call to the SOS system in \textbf{less than 5 seconds}
      \item[\texttt{R.P3}] The system shall grant data updates with at most \textbf{seconds precision} to third parties (time granularity can be selected in the request form, Table~\ref{tab:tprequest})
    \end{description}

  \subsection{Design constraints}
    % TODO forse questa intera sezione si può togliere

    \subsubsection{Standards compliance}

      See Section~\ref{sec:constraints} for data sharing assumptions.

    \subsubsection{Hardware limitations}

      The smartphone app version of \texttt{Data4Help} requires Android/iOS operating system, GPS location and 3G/4G connectivity to the smartphone on which it is installed, in order to exploit its basic functionalities. Moreover it is necessary that each user has his/her own wearables, able to collect data types that they want to monitor (Section~\ref{sec:datagathering}).

    %\subsubsection{Any other constraint}
    %TODO Superfluo?

  \subsection{Software system attributes}

    \subsubsection{Reliability}
    \label{sec:reliability}

      The system shall guarantee reliability $R = 1 - F$ ($F =$ probability of failure) as close as possible to 1. This is a very important aspect for \texttt{AutomatedSOS}, that needs fast and reliable communication with the SOS system. A possible way to decrease $F$ is to open two channels of communication that rely on different technologies with the SOS system: one via internet and the other via SMS. In this way we can decrease the overall $F$ to $F_{internet} \cdot F_{SMS}$, assuming that they are independent.

      There are two major situations which may result in an \textit{internal} system failure: components failure or unexecpected increase of communication traffic. At this level of abstraction is not strictly required, but in both of these cases a distributed architecture is the optimal solution: components redundancy and load balancing minimize the probability of these failures.

    \subsubsection{Availability}

      The system is expected to be available 99.99\% of the time. In case of failure (Section~\ref{sec:reliability}) it shall be able to recover within 1 second, otherwise \texttt{AutomatedSOS} won't be able to respect the requirement of Section~\ref{sec:performance}.

    \subsubsection{Security}

      The system shall store securely account details and data collected into its database. Payment history shall also be protected, but it's not a critical aspect of security issues, because the system won't store any payment information of its clients (payments are handled externally, Section~\ref{sec:payment}).

      Another security issue regards anonimity of users in anonymous data sets, requested by third parties through anonymous group requests. The system shall not allow third parties to retrieve any personal information about the users whose data entries compose anonymous data sets.

    \subsubsection{Maintainability}

      \texttt{Data4Help} has to collect data through wearables devices (Section~\ref{sec:datagathering}). Data types addition and management should be implemented in a flexible and extensible way, because wearables technologies change rapidly and our software should adapt in the least invasive way possible.

    \subsubsection{Portability}

      The system shall run on most iOS/Android devices, in order to simplify communication with wearables, as they often interact with smartphone apps.

      A Java implementation would guarantee compatibility also with most of desktop operating systems for better data visualization.
