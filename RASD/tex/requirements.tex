\newcommand{\fetchmock}[1] {img/mockup/#1.jpg}
\def \imgwidth {.65\linewidth}
\def \pagwidth {.5\linewidth}

\section{Specific requirements}
\label{sec:specreq}

  \subsection{External interface requirements}

    \subsubsection{User interfaces}
    \label{sec:userinterfaces}

      We will present the mockups of \texttt{Data4Help} app with \texttt{AutomatedSOS} options for users. Filters and forms fields are presented only for illustrative purposes: they may change in future releases or in the final product. These mockups are intended only to give an idea of what the graphical interface of our system will be like.

      \begin{figure}[h!]
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{homepage}}
          \caption{Login screen}
          \label{fig:homepage}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_registration}}
          \caption{User registration form}
          \label{fig:u_registration}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
        \end{minipage}
      \end{figure}

      \clearpage

      \begin{figure}[h!]
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_data}}
          \caption{User default screen}
          \label{fig:u_data}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_sidebar}}
          \caption{User sidebar}
          \label{fig:u_sidebar}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_filters}}
          \caption{Graphical interface filters}
          \label{fig:u_filters}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_request}}
          \caption{User request}
          \label{fig:u_request}
        \end{minipage}
      \end{figure}

      \clearpage

      \begin{figure}[h!]
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_options}}
          \caption{User options}
          \label{fig:u_options}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_permissions}}
          \caption{User permissions}
          \label{fig:u_permissions}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{u_anonym}}
          \caption{Anonymous sharing types}
          \label{fig:u_anonym}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_registration}}
          \caption{Third party registration}
          \label{fig:tp_registration}
        \end{minipage}
      \end{figure}

      \clearpage

      \begin{figure}[h!]
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_data}}
          \caption{Third party default screen}
          \label{fig:tp_data}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_sidebar}}
          \caption{Third party sidebar}
          \label{fig:tp_sidebar}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_requests}}
          \caption{Third party requests}
          \label{fig:tp_requests}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_options}}
          \caption{Third party options}
          \label{fig:tp_options}
        \end{minipage}
      \end{figure}

      \begin{figure}[ht!]
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_sreq}}
          \caption{Single user request form}
          \label{fig:tp_sreq}
          \vspace{4ex}
        \end{minipage}
        \begin{minipage}[b]{\pagwidth}
          \centering
          \includegraphics[width=\imgwidth]{\fetchmock{tp_areq}}
          \caption{Anonymous request form}
          \label{fig:tp_areq}
          \vspace{4ex}
        \end{minipage}
      \end{figure}

    %\subsubsection{Hardware interfaces} % FABIO ho tolto hardware e communication interfaces, tanto una non c'è e l'altra è già spiegata in Software interfaces

      %\texttt{Data4Help} is a software-based system and its functionalities are intended to be exploited in a software-based environment, hence no hardware interface is provided.

    \subsubsection{Software interfaces}

      \texttt{Data4Help} will not provide an automated software interface for user functionalities. However, for third parties that need automated access to our services, we will provide an API that communicates over HTTPS with messages encoded in JSON syntax. The API interface will be found in the software documentation and will be able to
      \begin{itemize}
        \item accept third party requests for access to new data
        \item accept third party requests for data they already have access to
        \item send data sets that third parties have requested, if they are allowed to have access to them
      \end{itemize}
      This API is used also by the app installed on third parties devices.

    %\subsubsection{Communication interfaces}

  \subsection{Functional requirements}

    \begin{description}
      \item[Account handling]
      \item[\texttt{R.A1}] The system shall allow users registration
      \item[\texttt{R.A2}] The system shall allow third party registration
      \item[\texttt{R.A3}] The system shall distinguish between user and third party accounts
      \item[\texttt{R.A4}] The system shall guardantee account uniqueness by not allowing two account to have the same email
      \item[\texttt{R.A6}] The system shall allow users and third parties to access their account (\textit{login}) only if they provide correct email and password
      \item[\texttt{R.A7}] The system shall allow users and third parties to exploit \texttt{Data4Help} and \texttt{AutomatedSOS} functionalities only if they are \textit{logged in} their account

      \item[Data encoding]
      \item[\texttt{R.D1}] The system shall encode data received through wearables'sensors and store it internally\footnote{for example the system can store data into an internal database or can save it using a cloud service; the important aspect is that data must be retrivable in the future}
      \item[\texttt{R.D2}] The system shall be able to retrive data previously stored on request
      \item[\texttt{R.D3}] The system shall not erase data once it is stored internally
      \item[\texttt{R.D4}] Once the system stored data, it shall allow access to that data only to the user account that was \textit{logged in} while the data was collected
      \item[\texttt{R.D5}] The system shall be able to share the stored data to more than one account
      \item[\texttt{R.D6}] The system shall be able to compose groups of data entries (\textit{aggregate data}) and anonymize them (every data entry in the group has no information about the providing user, such as fiscal code or email)

      \item[Interfaces]
      \item[\texttt{R.I1}] The system shall provide a registration form for users and third parties
      %TODO in case there are no data? Interface will not render anything: the requirement says that the interface shall be ABLE to render data in enery case, so I think it's fine
      \item[\texttt{R.I2}] The system shall provide to the user an interface able to render data graphically, allowing filters like time interval or data type
      \item[\texttt{R.I3}] The system shall provide a request form to the third parties

      \item[Data sharing requests]
      \item[\texttt{R.R1}] The system shall allow third parties to ask for data sharing of a single user
      \item[\texttt{R.R2}] The system shall ask the user to accept or decline every single-user request of data sharing by third parties that has him/her as target user
      \item[\texttt{R.R3}] The system shall provide access to the target user data to the third party only if the user accepted the request of the third party, otherwise the system shall notify to the third party that the user declined the request
      \item[\texttt{R.R4}] The system shall allow third parties to ask for data sharing of \textit{aggregate data}
      \item[\texttt{R.R5}] The system shall be able to check if a request for \textit{aggregate data} by a third party can be properly anonymized (there shall be at least 1000 user data entries that fit the parameters of the request)
      \item[\texttt{R.R6}] The system shall provide access to the \textit{aggregate data} to the third party only if the the request can be properly anonymized, otherwise the system shall notify the third party that its request cannot be properly anonymized
      \item[\texttt{R.R7}] The system shall provide access to a third party to newly produced data if it fits the third party request
      % TODO add refernce to the request structure, because this requirement is a bit ambiguous

      \item[SOS calls]
      \item[\texttt{R.S1}] The system shall provide to the user an option to apply to \texttt{AutomatedSOS}
      \item[\texttt{R.S2}] If user applied to \texttt{AutomatedSOS}, the system shall monitor his/her parameters in real time by checking whether they are above or below the thresholds
      % TODO add reference
      \item[\texttt{R.S3}] If user applied to \texttt{AutomatedSOS} and his/her health parameters are critical (above or below thresholds), the system shall send an emergency call to the SOS system
      \item[\texttt{R.S4}] When the system sends an emergency call, it shall provide to the SOS system API user's GPS location and user's health status through his/her critical parameters encoding

    \end{description}

  \subsection{Scenarios}

    \subsubsection{Stroke detection}

      Luke is a 65 years old man that after 40 years of work at the post office finally got retired. Because of the sedentary nature of his work he is worried that he may suffer a stroke. In order to monitor his health parameters, he buys a smartwatch that can monitor his heartbeat and downloads the \texttt{Data4Help} app. The system allows him to create an account after filling all the required information (Table~\ref{tab:login}). The system explicitly asks Luke if he wants to join the \texttt{AutomatedSOS} service and Luke accepts. The system starts checking in real time Luke's health parameters that are collected through his smartwatch.

      After some days Luke's health parameters exceede thresholds because of a stroke: the system recognizes immediatly the critical situation and forwards in less than 5 seconds an emergency notification to the SOS system, providing Luke's GPS location and health status feedback.

    \subsubsection{Anonymous request}

      The franchise BodySlim is opening a new gym in Milan near Parco Sempione. Its most succesful and distinctive characteristic is the timetable: open 365 days per year, 8 hours per day. In order to maximize the revenue the management would like to know in which time of the day potential customers do physical activity. A reliable sample can be obtained from Data4Help, therefore BodySlim creates a third party account by giving the required information (Table~\ref{tab:login}). The franchise fills the third party request form for an anonymous request (Table~\ref{tab:tprequest}): at least 2000 individuals of age between 20 and 60 in Parco Sempione area. As BodySlim confirms the request, the system fetches in its database users that fit BodySlim's request, composes a data set containing their data entries, anonymizes the data set and shares it with BodySlim's account. The franchise can now filter data by hour of day and identify when is Parco Sempione most frequented: these are, from its perspective, the most profitable hours in which the gym should stay opened.

      %Otherwise if the research is not successfully, Data4Help denied the request of BodySlim which has to find another way to obtain a reliable sample.
      %NO ALTERNATIVES:THIS IS AN EXAMPLE/AN APPLICATION

    \subsubsection{Single user request}

      Rose has just discovered that she's expecting a daughter. Dr. Harold, her gynecologist, needs to keep monitoring her blood ossygen, electrocardiogram and heartbeat, in order to understand if the pregnancy is proceeding well. He decides to exploit \texttt{Data4Help} third party functionalities, as he does with his other patients. He asks Rose to create an account of \texttt{Data4Help}, then logs into his account by providing email and password. He navigates to the request form and inserts Rose's fiscal code and the data types he wants to have access to for the next nine months. After the request has been confirmed, Rose receives the notification of Dr. Harold's request to her account and accepts it.

      Nine months later, Marie is born. She is beautiful and healthy, thanks to the pregnancy monitoring by Dr. Harold, exploited through the \texttt{Data4Help} service.

      % According to the single-user request(see Table 2)  policy Data4Help asks to Rose the consensus for sharing these data. Rose,which really care about her daughter's health, immediately gave the authorization to the app that can make them available to her gynecologist.
      %her motherRose which is worried about her privacy, wouldn't like to share his personal data anymore so decides to unsubscribe to Data4Help. The system after having received the request, delete her Dataset and her account. From now on neither the gynecologist nor Data4Help will be able to access to Rose's data.

    \subsubsection{Subsribing to new data}

      Jack is a policeman that has decided to spend his holidays in a spa called BeautySPA. It will allow him to lose 15kg thanks to fitness activity and healthy diet. In order to understand if this treatment is efficient over time BeautySPA decides that Jack's weight and body temperature should be monitored. The policeman and BeautySPA create respectively a user and a third party account of \texttt{Data4Help} and the system, after checking that all the required information (Table~\ref{tab:login}) are properly filled, allows them to exploit its functionalities.

      BeautySPA immediately applies for the Jack's health parameters through a third party request. The app asks to Jack the authorization whether to provide his data to the spa or not. He accepts and \texttt{Data4Help} shares his data to BeautySPA.

      Unfortunately, after just one month, the policeman had a weight increase of 6kg. In order to better understand which may be the cause the spa applies for more parameters (blood oxygen and heartbeat) through another third party request. Jack receives the notification, but, unhappy about his previous treatment, declines the request. BeautySPA won't have access to Jack's blood oxygen and heartbeat parameters.

    \subsubsection{Graphical interface}

      Paul is studying Telecommunication Engineering at Politecnico di Milano. He would like to partecipate at PolimiRun (held in May), therefore he has trained twice a week since January. In order to monitor his progress, he downloaded the \texttt{Data4Help} app and created a user account. He allowed anonymous sharing of heartbeat and blood ossygen to third parties. The system periodically collected Paul's parameters and saved the correspondent data entries in its database.

      At the end of April Paul wants to check if the PoliRun is beyond his physical capacities. After the login phase, he filters his data through the graphical interface, by limiting the rendering to blood ossygen and heartbeat weekly entries from January to April. The system retrieves the required data and renders it. Paul sees the impressive physical improvement during the four months (blood oxygen increase, heartbeat per minute reduced) and states that the PolimiRun is absolutely realistic for him.

    \subsubsection{Multiple single user requests}

      FastAndEasy, a car sharing company, has a business model based on how much time its clients rent one car in a week. After five years of activity, the society has to decide whether to change this model with a kilometers-based one or keeping the old time-based one. In order to take the right decision, FastAndEasy needs to know the GPS location of all of its clients while they are driving cars for the next three months. Because of this time-limited solution it would be a waste of money to implement a new system from scratch for picking up these data. FastAndEasy decides to rely on \texttt{Data4Help} and creates a third party account. It asks through multiple third party request forms the GPS location of its clients, identified by fiscal code. Many of them accept the request, forwarded by \texttt{Data4Help}, after FastAndEasy confirmation.

      After three months, FastAndEasy brings the collected data to the Board of Directors. They can now compute the possible earnings of the new model and compare them with the old ones, in order to take a decision about the business model.

  \subsection{Use cases}

        \begin{table}[h!]
        \centering
        \begin{tabularx}{\linewidth}{|c|X|}
          \hline
          \textbf{Name} & Sign in of User in Data4Help\\
        	\hline
        	\textbf{Actors} & User \\
        	\hline
        	\textbf{Entry Condition} & Data4Help is downloaded on the smartphone \\
        	\hline
        	\textbf{Flow of Events} & 1.User click on "Register" button in the login screen of the app.

        					2.User fills all the mandatory fields("Age", "Name", "Surname", "Email", "Sex", "Password", "Fiscal 							Code").

        					3.User insert in the Anonymous sharing permissions page the data that he want to share with 						the app.

        					4.User clicks on the "Confirm" button.

        					5.The system create a DataSet for the User in his internal database.\\
        	\hline
        	\textbf{Exit Condition} & The User account has been successfully created. \\
        	\hline
        	\textbf{Exceptions} &
        					%1. The system find that User filled the field "Age" with 12.
        					1.The system finds that User filled the field "Email"  with an email that is non-existent or that has 							already been associated with another user.

        					2.The system finds that User filled the field "Fiscal Code" with an expression not long 16 								characters.

        					3.The system finds that User filled the field "Password" with an expression shorter than 8 								characters.

        					All exceptions are handled notifying the issue to the User and taking back the \textbf{Flow of 							Events} to the point 2.\\
       
   \hline

        \end{tabularx}

      \end{table}


 \begin{table}[h!]
        \centering
        \begin{tabularx}{\linewidth}{|c|X|}
          \hline
          \textbf{Name} & Sign in of Third party in Data4Help\\
        	\hline
        	\textbf{Actors} & Third party \\
        	\hline
        	\textbf{Entry Condition} & Data4Help is downloaded on the smartphone \\
        	\hline
        	\textbf{Flow of Events} & 1.Third party click on "Register" button in the login screen of the app.

        					2.Third party fills all the mandatory fields("Email","Password","Name", "Interests", "Descriptions").

        					3.Third party click on "Register" button in the third party registration page.
					
					4.The system store in his internal database the all the the third party's information.\\

        	\hline
        	\textbf{Exit Condition} & The third party account has been successfully created. \\
        	\hline
        	\textbf{Exceptions} &
 
        					1.The system finds that third party filled the field "Email"  with an email that is non-existent or 						that has already been associated with another account.

        					2.The system finds that third party filled the field "Password" with an expression shorter than 8 							characters.

        					All exceptions are handled notifying the issue to the third party and taking back the \textbf{Flow 					of Events} to the point 2.\\
         
 \hline
       
 \end{tabularx}
     
 \end{table}


      \begin{table}[h!]
        \centering
        \begin{tabularx}{\linewidth}{|c|X|}
          \hline

          \textbf{Name} & Log in of User \\
        	\hline

        	\textbf{Actors} & User \\
        	\hline

        	\textbf{Entry Condition} & User has already created an account\\
        	\hline

        	\textbf{Flow of Events} & 1.User opens the app on his smartphone.

        					2.User insert his email in the field "Email" in the homepage of Data4Help.

        					3.User insert his password in the field "Password" in the homepage of Data4Help.

        					4.User Click on "Login" button in the login page of the app.\\
        	\hline

        	\textbf{Exit Condition} & User is successfully Logged in and can exploit all the functionalities of the app. \\
        	\hline

        	\textbf{Exceptions} & 1.The system doesn't find the email address inserted in the field "Email" in his internal DataBase.

        				In this case the \textbf{Flow of Events} has to be executed again from step 2.

        				2.The system doesn't find the password inserted in the field "Password" in his internal DataBase.

        				 In this case the \textbf{Flow of Events} has to be executed again from step 3.

        				3.The system find both the email and the password inserted by User but these refers to 2 different 						users.

        				In this case the \textbf{Flow of Events} has to be executed again from step 2. \\
         
 \hline

        \end{tabularx}

      \end{table}



      \begin{table}[h!]
        \centering
        \begin{tabularx}{\linewidth}{|c|X|}
          \hline

          \textbf{Name} & Accept Single-User request\\
        	\hline

        	\textbf{Actors} & Third party and User \\
        	\hline

        	\textbf{Entry Condition} & Third party and User have already created respectively a third party and a user account and they 							are already logged in in Data4Help.\\
        	\hline

        	\textbf{Flow of Events} & 1.Third party clicks on the button "Single-User Request".

        					2.Third party inserts the Fiscal Code of the User in the field "Fiscal Code" of the Single-User 							Request page.

        					3.Third party lists to the system the data of the User which it would like to access filling the field 						"Data types" in the Single-User Request page.

					4.The Third party clicks on the "Confirm" button.

        					5.The system asks to the User whether he accepts or denies to share those specified data with 						the Third party.

        					6.User answers clicking in the field "Accept" in his My data page.

        					7.The system make available the data for the third party.\\
        	\hline

        	\textbf{Exit Condition} & Third party can exploit the data \\
        	\hline

        	\textbf{Exceptions} & 1.The system doesn't find the fiscal code inserted by third party in the field "Field Code" in his 						internal database.

        				In this case the \textbf{Flow of Events} has to be executed again from step 2.

        				2.The system discovers that the User has denied the request therefore Data4Help notifies this 						information to the third party which won't have access to the required data.

        				The third party can 	make a new Single-User request referred to a new User: in this case the 							\textbf{Flow of Events} has to executed again from the first step.\\

         
 \hline
        
\end{tabularx}

      \end{table}


      \begin{table}[h!]
        \centering
        \begin{tabularx}{\linewidth}{|c|X|}
          \hline

          \textbf{Name} & Call an ambulance\\
        	\hline

        	\textbf{Actors} & User and SOS System\\
        	\hline

        	\textbf{Entry Condition} & User has actived AutomatedSOS and his health parameters exceedes thresholds\\
        	\hline

        	\textbf{Flow of Events} & 1.The system collects GPS location and health status parameters of the User from his internal 						database.

        					2.The system makes an emergency call to SOS System by providing GPS location and health 							status feedback of the User.

        					3.The SOS System accepts the call and dispatches the ambulance to the User location.

        					4.The SOS System notifies the system when the ambulance arrives at User Location.\\
        	\hline

        	\textbf{Exit Condition} & The ambulance is taking care of the User. \\
        	\hline

        	\textbf{Exceptions} & \\
        	\hline

        	\textbf{Special Requirements} & 1.The system has to collect the GPS location,health parameters of the User and make the 							emergency call to SOS System within five seconds from the time the health parameters 							exceedes thresholds.\\
      
    \hline
      
  \end{tabularx}
    
  \end{table}



      \begin{table}[h!]
        \centering
        \begin{tabularx}{\linewidth}{|c|X|}
          \hline

          \textbf{Name} & Accept Anonymous-Group request\\
        	\hline

        	\textbf{Actors} & Third Party\\
        	\hline

        	\textbf{Entry Condition} & Third party has already created a third party account and is already logged in in Data4Help.\\
        	\hline

        	\textbf{Flow of Events} &
        					1.Third party clicks on the button "Anonymous-Group Request".

					2.Third party specify the size of the sample of users needed and the time until these data has to 						available to her.

        					3.Third party lists to the system which data requires filling the field "Data types" in the 							Anonymous-Group request page.

        					4.The system looks for, in his internal database, the User's Datasets  which fit with the request 						made by the third party.

        					5.The system aggregate the data found and anonymize them.

        					6.The system provides the anonymous data to the third party.\\
        	\hline

        	\textbf{Exit Condition} & Third party can exploit the data \\

        	\hline

        	\textbf{Exceptions} & 1.The data cannot be anonymized  by the system because it doesn't find at least 1000 							User Datasets which match with the third party request. Therefore the system cannot 							grant access to the data to the third party and has to notify her this information .

        				The third party can make a new Anonymous-Group request asking for a new set of data: 							in this case the \textbf{Flow of Events} has to be executed again from the first step.\\

      
    \hline
     
   \end{tabularx}
  
    \end{table}





      \begin{table}[h!]
        \centering
        \begin{tabularx}{\linewidth}{|c|X|}
          \hline

          \textbf{Name} & Show Data previously acquired\\
        	\hline

        	\textbf{Actors} & User\\
        	\hline

        	\textbf{Entry Condition} & User has already created a User account and is already logged in in Data4Help.\\
        	\hline

        	\textbf{Flow of Events} &
        					1.User clicks on the button "My data" in the User sidebar.

        					2.User decides which filter has to be applied to his DataSet filling the fields "Filters".

        					3.The system organize the User's DataSet following the User's instructions.

        					4.The system show to the User these data thanks to a graphical interface. \\
        	\hline

        	\textbf{Exit Condition} & User can see his data in the specified way\\

        	\hline

        	\textbf{Exceptions} & 1 The system hasn't gathered any data yet because the user has just created an account.

        				Hence the system notifies the user that no data can be shown.

        				Only after having collected some data the User can specified filters:the \textbf{Flow of Events} must 					be executed from the first step.\\

          \hline

     
   \end{tabularx}
     
 \end{table}



      \begin{table}[h!]
        \centering
        \begin{tabularx}{\linewidth}{|X|X|}
          %|X| let to go in a new line on a cell
          \hline

          \textbf{Use Case ID} & \textbf{Name}  \\
        	\hline

        	1 & Sign in of User in Data4Help\\
        	\hline

	2 & Sign in of Third party in Data4Help\\
        	\hline

        	3 & Log in of User\\
        	\hline

        	4 & Accept Single-User request\\
        	\hline

        	5 & Call an Ambulance\\
        	\hline

        	6 & Accept Anonymous-Group request\\
        	\hline

        	7 & Show Data Previously Acquired\\
          \hline

  	  
  \end{tabularx}
     
   \caption{Traceability Matrix}
   
   \end{table}



      \begin{table}[h!]
        \centering
        \begin{tabularx}{\linewidth}{|X|X|X|X|}
          %|X| let to go in a new line on a cell
          \hline
          \textbf{Raw ID} & \textbf{Goal ID} & \textbf{Req ID} & \textbf{Use Case ID} \\
          \hline

	        r1 & \texttt{G.U.1} & \texttt{R.A1}  \newline \texttt{R.A3}  \newline \texttt{R.A4} \newline \texttt{R.I.1}& \texttt{1} \\
          \hline

	        r2 & \texttt{G.T.1}  \newline \texttt{G.T.2} \newline \texttt{G.T.3}& \texttt{R.A2}  \newline \texttt{R.A3}  \newline \texttt{R.A4} \newline \texttt{R.I.1} & \texttt{2} \\
          \hline

	        r3 & \texttt{G.U.1} & \texttt{R.A3}  \newline \texttt{R.A6}  \newline \texttt{R.A7} & \texttt{3}  \\
	         \hline

	        r4 & \texttt{G.T.1} & \texttt{R.A3}  \newline \texttt{R.I.3}  \newline \texttt{R.R.1} \newline \texttt{R.R.2} \newline \texttt{R.R.3}& \texttt{4}  \\
          \hline

          r5 & \texttt{G.U2} & \texttt{R.S1} \newline  \texttt{R.S2} \newline \texttt{R.S3}\newline \texttt{R.S4} & \texttt{5}   \\
          \hline

          r6 & \texttt{G.T2} & \texttt{R.A3} \newline  \texttt{R.D2} \newline \texttt{R.D5}\newline \texttt{R.D6}  \newline \texttt{R.I.3} \newline \texttt{R.R4}  \newline \texttt{R.R5}  \newline \texttt{R.R6} & \texttt{6}   \\
          \hline

          r7 & \texttt{G.U1} & \texttt{R.A3} \newline \texttt{R.A7} \newline  \texttt{R.I2} \newline  \texttt{R.D2} & \texttt{7}   \\
          \hline

      \end{tabularx}
      \end{table}
      %everything referred to the system

  \subsection{Performance requirements}
  \label{sec:performance}

    \begin{description}
      \item[\texttt{R.P1}] The system shall detect in \textbf{negligible time} (less than 0.1 seconds) is a data entry has values that exceed thresholds\footnote{this situation directly corresponds to user's health in danger}
      \item[\texttt{R.P2}] The system, once an emergency is detected (as in \texttt{R.P1}), shall forward an emergency call to the SOS system in \textbf{less than 5 seconds}
      \item[\texttt{R.P3}] The system shall grant data updates with at most \textbf{seconds precision} to third parties (time granularity can be selected in the request form, Table~\ref{tab:tprequest})
    \end{description}

  \subsection{Design constraints}

    \subsubsection{Standards compliance}

      See Section~\ref{sec:constraints} for data sharing assumptions.

    \subsubsection{Hardware limitations}

      The smartphone app version of \texttt{Data4Help} requires Android/iOS operating system, GPS location and 3G/4G connectivity to the smartphone on which it is installed, in order to exploit its basic functionalities. Moreover it is necessary that each user has his/her own wearables, able to collect data types that they want to monitor (Section~\ref{sec:datagathering}).

    %\subsubsection{Any other constraint}
    %TODO Superfluo?

  \subsection{Software system attributes}

    \subsubsection{Reliability}

      The sofware is expected to work continuously for 24 hours per day. Negligible deviations are accepted.

      Moreover as section 3.6.4 says, the sofware changes during time, so each time the software is modified is necessary to check the consequences on the reliability.

    \subsubsection{Availability}

      The system is expected to be available for 99.99\% of the time. In case of failure it must be able to recover within 1 second otherwise in case of user's health problem AutomatedSOS won't respect the constraint descibed in \ref{sec:performance} and therefore the user will be in a critical situation.

 There 2 different situations which may result in a failure:failed components or due to unexecpected increasing in the requests.

At this level of abstraction is not strickly required but in both of these cases a distributed architecture is an optimal solution:indeed in case of failure one of the redundant component can replace the one offline and in case of high demand a load balancing between redundant component can minimize the probability of failure of the system.

    \subsubsection{Security}

      The system requires the users(both Data4Help and AutomatedSOS) and third Parties(only in Data4Help), in order to exploit all the functionalities of the app and avoid unauthorized access, to authenticate through email and password.

 These 2 credentials and all the Data collected by the system has to be securely stored in the internal database.

 Moreover as  requirement \texttt{R.D6} says for privacy issues for all the Anonymous-Group requests the system must not allow the third parties to link data collected to the users that produced them.
      %payment?

    \subsubsection{Maintainability}

      Data4Help, as \ref{sec:datagathering} says, has to collect data through multiple physical wearables devices therefore Data type handling should be implemented by the system in a flexible and extensible way, because wearables technologies change rapidly and our software should adapt in the least invasive way possible.

    \subsubsection{Portability}

      The system has to gather user's data through multiple devices as \ref{sec:datagathering} says. Therefore, must be guarantee that different physical wearables can easily send data to this product function for example thanks to some form of abstraction.

 In this way I will also have a significant cost reduction and an improvement in maintainability of the system.
